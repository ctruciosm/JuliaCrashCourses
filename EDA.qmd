---
title: "Julia para Ciência de Dados"
subtitle: "Um guia introdutório para importar, transformar, analisar e modelar dados"
lang: "pt"
author: "**Professor: Carlos Trucíos (DE)** <br> **Instrutores:** Arthur da Silva (DMA), Henrique Velloso (DE) e Sarah Pereira (DMA)."
institute: "7ª  Semana da Matemática Aplicada (SEMAP), <br> Universidade Estadual de Campinas (UNICAMP) <br> Agosto de 2025"
knitr:
    opts_chunk: 
      fig.align: 'center'
execute:
    message: false
    warning: false
format:
    revealjs:
        slide-number: true
        toc: true
        toc-depth: 1
        toc-title: Agenda
        self-contained: true
        chalkboard: false
        width: 1600
        height: 900
        theme: [default, styles.scss]
        incremental: true
        code-fold: false
        logo: "imagens/imecc.png"
        footer: "7ª SEMAP    |   Agosto de 2025    |    [www.ime.unicamp.br/julialang](https://ime.unicamp.br/julialang)"
        highlight-style: "a11y"
        title-slide-attributes:
            data-background-image: "imagens/unicamp.png"
            data-background-size: 20%
            data-background-position: 99% 5%
            data-background-opacity: "1"
editor: source
---

```{julia}
#| echo: false
#| output: false

import Pkg

Pkg.add("Statistics")
Pkg.add("Random")
Pkg.add("TidierData")
Pkg.add("LinearAlgebra")
Pkg.add("DataFrames")
Pkg.add("CSV")
Pkg.add("XLSX")
Pkg.add("StatsBase")
Pkg.add("StatsPlots")
Pkg.add("Plots")
Pkg.add("Makie")
Pkg.add("Gadfly")
Pkg.add("Distributions")
Pkg.add("MLJ")
Pkg.add("StatsBase")
Pkg.add("GLM")
Pkg.add("CategoricalArrays")
```

```{julia}
#| echo: false

using CSV
using DataFrames

file = "https://raw.githubusercontent.com/Arthur-Dionizio/minicurso-julia/main/datasets/dataset.csv";
dados = CSV.read(download(file), DataFrame);
first(dados, 3)
```

# Análise Exploratória de Dados (EDA)

## EDA

-   `Julia` torna possível compreender e explorar conjuntos de dados, identificando padrões, tendências e possíveis outliers antes da modelagem.
-   Nesse tópico, iremos explorar algumas estatísticas resumo (média, mediana, desvio-padrão, etc.) e algumas distribuições (discretas e contínuas).
-   Os pacotes `Statistics.jl`, `StatsBase.jl`, `DataFrames.jl` e `TidierData.jl` serão essenciais para a análise `r emo::ji("cool")`.

. . . 

```{julia}
#| echo: true
using DataFrames
using StatsBase
using Statistics
using TidierData
```


## EDA: Medidas de tendência central

Algumas das principais medidas são:

-   `mean(x)` representa média aritmética
-   `median(x)` representa a mediana
-   `mode(x)` representa a moda (pacote `StatsBase.jl`)


. . . 

**Ex.:**

```{julia}
#| echo: true
x = [1, 2, 2, 2, 5, 6, 7];

mean(x)
```

## EDA: Medidas de dispersão

-   `var(x)` representa variância
-   `std(x)` representa o desvio padrão
-   `minimum(x)` e `maximum(x)` são os valores mínimo e máximo
-   `quantile(x, p)` repesenta quantis (`p` é o parâmetro da posição relativa da distribuição)


. . . 

**Ex.:**

```{julia}
#| echo: true
x = [1, 2, 2, 2, 5, 6, 7];

std(x)
```

```{julia}
#| echo: true
x = [1, 2, 2, 2, 5, 6, 7];

minimum(x),maximum(x)
```

## EDA: Contagem e frequência

-   `length(x)` é o número de elementos
-   `count(cond, x)` conta elementos que satisfazem uma condição `cond`
-   `countmap(x)` cria uma tabela de frequências (pacote `StatsBase.jl`)

. . . 


```{julia}
#| echo: true
x = ["maçã", "banana", "maçã", "laranja", "banana", "maçã"];

countmap(x)
```

```{julia}
#| echo: true
x = ["maçã", "banana", "maçã", "laranja", "banana", "maçã"];

length(x)
```

## EDA: Informações resumidas

-   `describe(df)` fornece estatísticas descritivas de um data frame
-   `cor(x, y)` descreve uma matriz de correlação entre duas variáveis `x` e `y`
-   `cov(x, y)` covariância das variáveis `x` e `y`

. . . 

```{julia}
#| echo: true
df = DataFrame(
    idade = [20, 25, 30, 35, 40],
    altura = [1.70, 1.75, 1.80, 1.65, 1.90],
    nome = ["Ana", "Bruno", "Carlos", "Daniela", "Eduardo"]
);

describe(df)
```

```{julia}
x = [2,4,6]
y = [3,2,1]

cor(x,y),cov(x,y)
```

## EDA


::: {.callout-note icon=false}
### Dica
Para identificar os cinco artistas com maior número de faixas no dataset, utilize as funções `groupby()` e `combine()` para criar uma nova tabela contendo duas colunas: uma com o nome dos artistas e outra com a contagem de faixas. Em seguida, use `sort!()` para ordenar de forma decrescente e `first()` para exibir apenas os primeiros registros.
:::


. . . 

**Ex.:**

```{julia}
#| eval: false
using Statistics, StatsPlots, Plots

artists = combine(groupby(dados, :artists), nrow => :n_tracks)
sort!(artists, :n_tracks, rev=true)
first(artists, 5)  # Top 5 artistas
```

**Ex.:**

Utilizando o `TidierData.jl`, é possível fazer a mesma análise em uma sintaxe mais simplificada.

```{julia}
@chain dados begin
    @group_by(artists)
    @summarise(n = nrow())
    @arrange(desc(n))
    @slice(1:5)
end
```

## EDA: Análise descritiva do dataset


::: {.callout-note icon=false}
### Dica
Para filtrar as faixas de um artista específico, como George Jones, utilize `filter()` em conjunto com `occursin()` na coluna :artists. Depois, aplique a função `describe()` às variáveis numéricas para obter as estatísticas descritivas, como média, mediana, mínimo e máximo.
:::


. . . 



``` {julia}
#| echo: true
using Statistics, StatsPlots, Plots, DataFrames

vars_numericas = [:popularity, :duration_ms, :danceability, :energy,
                  :loudness, :speechiness, :acousticness, :instrumentalness,
                  :liveness, :valence, :tempo]

describe(select(df_george, vars_numericas))
```

## EDA: Visualização de dados

-   O Julia oferece diversas bibliotecas para criar visualizações estatísticas de forma simples e flexível, permitindo a análise e interpretação de dados de maneira visual. Algumas bibliotecas populares incluem `Plots.jl`, `StatsPlots.jl`, `Makie.jl` e `Gadfly.jl`.

```{julia}
#| eval: false
import Pkg

Pkg.add("Plots")
Pkg.add("StatsPlots")
Pkg.add("Makie")
Pkg.add("Gadfly")
Pkg.add("Distributions")
```

```{julia}
#| eval: false
using Plots, StatsPlots, Makie, Gadfly, Distributions
```

## EDA: Boxplot

- Um boxplot resume a distribuição dos dados destacando mediana, quartis e possíveis outliers.

**Ex.:**

- Utilizando `StatsPlots.jl`

```{julia}
popularidade = dados.popularity

StatsPlots.boxplot(popularidade, label = "Popularidade", title = "Boxplot da Popularidade das Músicas", ylabel = "Popularidade")
```

**Ex.:**

- Utilizando `Gadfly.jl`

``` {julia}
#| echo: true
using Gadfly

Gadfly.plot(dados, x= repeat(["1"],nrow(dados)), y=:popularity, Geom.boxplot,
     Guide.xlabel(""),
     Guide.ylabel("Popularidade"),
     Guide.title("Boxplot da Popularidade das Músicas"))
```

## Barplot (gráfico de barras)

- Representa frequências ou valores médios para categorias. Se nosso objetivo é encontrar os gêneros de músicas mais populares da base de dados, podemos utilizar o código abaixo para isso.

**Ex.:**

- Utilizando `bar(x)` do `StatsPlots.jl`.

``` {julia}
#| echo: true

popularidade = @chain dados begin
    @group_by(track_genre)
    @summarize(mean_popularity = mean(popularity))
    @arrange(desc(mean_popularity))
    @slice(1:8)
end

bar(generos.track_genre, generos.mean_popularity, xlabel="Gênero", ylabel="Dançabilidade", 
    title="Dançabilidade de cada", legend=false)
```

**Ex.:**

- Utilizando `Gadfly.jl`

```{julia}
using TidierData

popularidade = @chain dados begin
    @group_by(track_genre)
    @summarize(mean_popularity = mean(popularity))
    @arrange(desc(mean_popularity))
    @slice(1:8)
end

Gadfly.plot(
    popularidade,
    x=:track_genre,
    y=:mean_popularity,
    Geom.bar,
    Guide.xlabel("Gênero"),
    Guide.ylabel("Popularidade Média"),
    Guide.title("Top 8 Gêneros por Popularidade Média"),
    Gadfly.Theme(bar_spacing=2mm)
)
```

## EDA: Histograma

-   Exibe a distribuição de frequências de variáveis contínuas. Caso você não possua um conjunto de dados real, é possível gerar números pseudoaleatórios com o pacote `Random.jl` e criar uma distribuição normal utilizando o pacote `Distributions.jl`.

**Ex.:**

- Utilizando `StatsPlots.jl`

``` {julia}
#| echo: true
using Random, Distributions, Plots

alturas = rand(Normal(170, 7), 500) # median = 7; std = 7; amostra = 500

histogram(
    alturas,
    bins = 20,
    xlabel = "Altura (cm)",
    ylabel = "Frequência",
    title = "Distribuição das Alturas",
    legend = false
)
```

**Ex.:**

- Utilizando `Gadfly.jl`

```{julia}
using Gadfly, Distributions

alturas = rand(Normal(170, 7), 500)

Gadfly.plot(x = alturas, Geom.histogram(bincount = 20),
     Guide.xlabel("Altura (cm)"),
     Guide.ylabel("Frequência"),
     Guide.title("Distribuição das Alturas"))
```

**Ex.:**

- Em nossa base de dados, é possível analisar a distribuição de  `duration_ms` via um histograma.

```{julia}
tempo = dados.tempo

Gadfly.plot(x = tempo, Geom.histogram(bincount = 15),
     Guide.xlabel("Tempo (BPM)"),
     Guide.ylabel("Frequência"),
     Guide.title("Distribuição do Tempo (BPM) das Músicas"))
```

## EDA: Curva de densidade

-   Para gerar a curva de densidade em `Julia`, você pode usar o argumento `normalize=:pdf` dentro da função `histogram()`, no pacote `Plots.jl`:

**Ex.:**

``` {julia}
using Random, Distributions, Plots

alturas = rand(Normal(170, 7), 500) # median = 7; std = 7; amostra = 500

histogram(alturas, 
    bins=20, 
    normalize=:pdf, 
    alpha=0.4, 
    label="Histograma")    
Plots.plot!(Plots.density(alturas), label="Curva de densidade", lw=2, color=:blue)
```

**Ex.:**

- Utilizando `Gadfly.jl`, a sintaxe é mais simplificada.

```{julia}
using Gadfly, Distributions

alturas = rand(Normal(170, 7), 500)

Gadfly.plot(
    x= alturas,
    Geom.density,
    Guide.xlabel("Altura (cm)"),
    Guide.ylabel("Densidade"),
    Guide.title("Distribuição das Alturas")
)
```

## EDA: Gráfico de dispersão

- Mostra a relação entre duas variáveis numéricas.

**Ex.:**

- Utilizando `Plots.jl`

``` {julia}
#| echo: true
using Random, Plots

x = 1:20
y = x .+ randn(20) .* 2

Plots.scatter(x, y,
    xlabel = "Variável X",
    ylabel = "Variável Y",
    title = "Exemplo de Gráfico de Dispersão",
    legend = false,
    color = :blue,
    markerstrokecolor = :black)
```

- Utilizando `Gadfly.jl` e nossa base de dados.

```{julia}
using Gadfly, Random

x = 1:20
y = x .+ randn(20) .* 2

Gadfly.plot(
    dados,
    x = x,
    y = y,
    Geom.point,
    Guide.xlabel("Eixo X"),
    Guide.ylabel("Eixo Y"),
    Guide.title("Exemplo de Gráfico de Dispersão")
)
```

**Ex.:**

## EDA: Matrizes de correlacão e mapas de calor

-   Matriz de Correlação: Tabela que mostra o grau de correlação (associação linear) entre pares de variáveis numéricas.
-   Mapa de Calor (Heatmap): Representação visual de uma matriz, onde os valores numéricos são exibidos como cores.

**Por que usar?**

-   Identificar relações fortes ou fracas entre variáveis.
-   Detectar multicolinearidade em análise estatística e modelagem.
-   Facilitar a interpretação visual de grandes conjuntos de dados


## EDA: Matrizes de correlacão e mapas de calor


**Ex.:**

``` {julia}
#| echo: true
using Random, StatsPlots

Random.seed!(123)

n = 50
A = randn(n) .* 10
B = A .* 0.5 .+ randn(n) .* 5
C = randn(n) .* 2
D = 0.8 .* A .- 0.3 .* C .+ randn(n)

df_rand = DataFrame(A=A, B=B, C=C, D=D)

corr_mat = cor(Matrix(df_rand))

heatmap(names(df_rand), names(df_rand), corr_mat;
    c = :coolwarm, clim=(-1,1), aspect_ratio=1,
    title="Matriz de Correlação (Dados Aleatórios)",
    xlabel="", ylabel="", xrotation=45, yrotation=45)
```